<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Mon Apr 14 11:55:51 EDT 2014 -->
<title>GeoNamesHelper</title>
<meta name="date" content="2014-04-14">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="GeoNamesHelper";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GeoNamesHelper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../edu/virginia/iath/snac/helpers/DateParserHelper.html" title="class in edu.virginia.iath.snac.helpers"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/virginia/iath/snac/helpers/GeoNamesHelper.html" target="_top">Frames</a></li>
<li><a href="GeoNamesHelper.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">edu.virginia.iath.snac.helpers</div>
<h2 title="Class GeoNamesHelper" class="title">Class GeoNamesHelper</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>edu.virginia.iath.snac.helpers.GeoNamesHelper</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">GeoNamesHelper</span>
extends java.lang.Object</pre>
<div class="block">GeoNamesHelper Class, used for querying cheshire for Geonames results.  Also utilizes
 Google AutoCorrect to fix spelling errors and get more information search strings
 before searching in cheshire.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Robbie Hott</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#betterResults">betterResults</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.net.Socket</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#cheshire">cheshire</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.Map&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#countries">countries</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#debug">debug</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#didNGramsSearch">didNGramsSearch</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private double</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#discountConfidence">discountConfidence</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#googleAPIKey">googleAPIKey</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.io.BufferedReader</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#in">in</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#numResults">numResults</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.io.PrintWriter</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#out">out</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#overkill">overkill</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private org.w3c.dom.Document</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#resultDoc">resultDoc</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#results">results</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.Map&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#states">states</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#type">type</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.HashSet&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#uniqueResults">uniqueResults</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#GeoNamesHelper()">GeoNamesHelper</a></strong>()</code>
<div class="block">Default Constructor: Initializes all lists and pre-fills country and state lookup maps.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#addResult(java.lang.String)">addResult</a></strong>(java.lang.String&nbsp;cheshireResult)</code>
<div class="block">Parses the cheshire result string ("Default...") for the number of results
 found, then gets the cheshire Geonames XML string for the top result of this
 query and addes it to each list.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#checkForUSState(java.lang.String, java.lang.String)">checkForUSState</a></strong>(java.lang.String&nbsp;first,
               java.lang.String&nbsp;second)</code>
<div class="block">Checks for fuzzy state names in the second position in the comma separated string</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#cleanString(java.lang.String, boolean)">cleanString</a></strong>(java.lang.String&nbsp;string,
           boolean&nbsp;periodToSpace)</code>
<div class="block">Cleans a string of extraneous characters, to create a normal form.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#connect()">connect</a></strong>()</code>
<div class="block">Connects to cheshire via a Socket on localhost, port 12345.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#disconnect()">disconnect</a></strong>()</code>
<div class="block">Disconnects the Socket connection to cheshire.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#exactQueries(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">exactQueries</a></strong>(java.lang.String&nbsp;first,
            java.lang.String&nbsp;second,
            java.lang.String&nbsp;country,
            java.lang.String&nbsp;type)</code>
<div class="block">Performs exact queries in Cheshire based on the query string's parts (first, second, country).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getAllFixedUpResultsCheshireEverReturned()">getAllFixedUpResultsCheshireEverReturned</a></strong>()</code>
<div class="block">Gets all Cheshire results (in Geonames XML format) that were returned that are filtered/sorted by ngrams.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getAllOrderedResults()">getAllOrderedResults</a></strong>()</code>
<div class="block">Gets all top Cheshire results (in Geonames XML format), in order based on when they were found.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getAllOrderedResults(int)">getAllOrderedResults</a></strong>(int&nbsp;max)</code>
<div class="block">Gets top <code>max</code> Cheshire results (in Geonames XML format), in order based on when they were found.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getAllResultsCheshireEverReturned()">getAllResultsCheshireEverReturned</a></strong>()</code>
<div class="block">Gets all Cheshire results (in Geonames XML format) that were returned.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getAllUniqueResults()">getAllUniqueResults</a></strong>()</code>
<div class="block">Gets all unique top Cheshire results (in Geonmaes XML format), in no particular order.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getCheshireResultString()">getCheshireResultString</a></strong>()</code>
<div class="block">Gets the Geonames XML top result from cheshire.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getCheshireResultString(int)">getCheshireResultString</a></strong>(int&nbsp;start)</code>
<div class="block">Gets the Geonames XML result from cheshire at the given offset <code>start</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getConfidence()">getConfidence</a></strong>()</code>
<div class="block">Generates a confidence of the result that has been found.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.HashMap&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getCountries()">getCountries</a></strong>()</code>
<div class="block">Creates a hashmap of countries of the world as full name -> ISO standard abbreviation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesEntry()">getGeonamesEntry</a></strong>()</code>
<div class="block">Gets the top Geonames result, in Geonames XML format</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesId()">getGeonamesId</a></strong>()</code>
<div class="block">Parses out and returns the geonames id from the top Geonames result</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesLatitude()">getGeonamesLatitude</a></strong>()</code>
<div class="block">Parses out and returns the latitude from the top Geonames result</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesLongitude()">getGeonamesLongitude</a></strong>()</code>
<div class="block">Parses out and returns the longitude from the top Geonames result</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesName()">getGeonamesName</a></strong>()</code>
<div class="block">Parses out and returns the name from the top Geonames result</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesName(java.lang.String)">getGeonamesName</a></strong>(java.lang.String&nbsp;cheshireResult)</code>
<div class="block">Parses the given cheshire Geonames XML result and returns the name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesNumAltNames(java.lang.String)">getGeonamesNumAltNames</a></strong>(java.lang.String&nbsp;cheshireResult)</code>
<div class="block">Parses the given cheshire Geonames XML result and returns the number of alternate names.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGeonamesPop(java.lang.String)">getGeonamesPop</a></strong>(java.lang.String&nbsp;cheshireResult)</code>
<div class="block">Parses the given cheshire Geonames XML result and returns the population.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getGoogleAutoCorrectValue(java.lang.String)">getGoogleAutoCorrectValue</a></strong>(java.lang.String&nbsp;query)</code>
<div class="block">Queries the Google Autocorrect API and returns the top comma separated result from Google.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getLevelOfSearch()">getLevelOfSearch</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getNumResults()">getNumResults</a></strong>()</code>
<div class="block">Gets the total number of results.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getOrderedResultsByNGrams(java.lang.String, int)">getOrderedResultsByNGrams</a></strong>(java.lang.String&nbsp;first,
                         int&nbsp;ngramLength)</code>
<div class="block">Orders the candidate results from Cheshire to produce a better resulting set.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getOrderedResultsByNGramsDifference(java.lang.String, int)">getOrderedResultsByNGramsDifference</a></strong>(java.lang.String&nbsp;first,
                                   int&nbsp;ngramLength)</code>
<div class="block">Orders the candidate results from Cheshire to produce a better resulting set.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getOrderedResultsByNGramsFlexible(java.lang.String, int)">getOrderedResultsByNGramsFlexible</a></strong>(java.lang.String&nbsp;first,
                                 int&nbsp;ngramLength)</code>
<div class="block">Orders the candidate results from Cheshire to produce a better resulting set.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getResultCount(java.lang.String)">getResultCount</a></strong>(java.lang.String&nbsp;cheshireResult)</code>
<div class="block">Parses the cheshire result string for the number of matches found.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.util.ArrayList&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getSimilarLengthResults(java.lang.String, int)">getSimilarLengthResults</a></strong>(java.lang.String&nbsp;first,
                       int&nbsp;diff)</code>
<div class="block">Use the list of all results given by Cheshire and the length of the first part of the query string
 to produce a smaller list of results that only differ *in length* from the first part of the query string by
 <code>diff</code> number of characters.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.HashMap&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#getStates()">getStates</a></strong>()</code>
<div class="block">Creates a hashmap of US/Canada states and territories as full name -> abbreviation</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#parseGoogleType(java.lang.String)">parseGoogleType</a></strong>(java.lang.String&nbsp;type2)</code>
<div class="block">Parses the Google location type and returns a valid Geonames location type</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#parseResult()">parseResult</a></strong>()</code>
<div class="block">Parses the resulting Geonames XML row into the Document object resultDoc for later use.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#queryCheshire(java.lang.String)">queryCheshire</a></strong>(java.lang.String&nbsp;query)</code>
<div class="block">Search for a given query string.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#queryGoogle(java.lang.String)">queryGoogle</a></strong>(java.lang.String&nbsp;query)</code>
<div class="block">Search for a given query string as an exact match.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#searchForCountry(java.lang.String)">searchForCountry</a></strong>(java.lang.String&nbsp;query)</code>
<div class="block">Looks up the query string in a map of countries and ISO abbreviations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#searchForState(java.lang.String)">searchForState</a></strong>(java.lang.String&nbsp;query)</code>
<div class="block">Looks up the query string in a map of states and state abbreviations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../../../edu/virginia/iath/snac/helpers/GeoNamesHelper.html#undesiredQueries(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">undesiredQueries</a></strong>(java.lang.String&nbsp;first,
                java.lang.String&nbsp;second,
                java.lang.String&nbsp;country,
                java.lang.String&nbsp;query)</code>
<div class="block">Performs the undesired Cheshire queries.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="debug">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>debug</h4>
<pre>private static final&nbsp;boolean debug</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../constant-values.html#edu.virginia.iath.snac.helpers.GeoNamesHelper.debug">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="cheshire">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cheshire</h4>
<pre>private&nbsp;java.net.Socket cheshire</pre>
</li>
</ul>
<a name="out">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>out</h4>
<pre>private&nbsp;java.io.PrintWriter out</pre>
</li>
</ul>
<a name="in">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>in</h4>
<pre>private&nbsp;java.io.BufferedReader in</pre>
</li>
</ul>
<a name="results">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>results</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt; results</pre>
</li>
</ul>
<a name="uniqueResults">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uniqueResults</h4>
<pre>private&nbsp;java.util.HashSet&lt;java.lang.String&gt; uniqueResults</pre>
</li>
</ul>
<a name="overkill">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>overkill</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt; overkill</pre>
</li>
</ul>
<a name="betterResults">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>betterResults</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt; betterResults</pre>
</li>
</ul>
<a name="numResults">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>numResults</h4>
<pre>private&nbsp;int numResults</pre>
</li>
</ul>
<a name="didNGramsSearch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>didNGramsSearch</h4>
<pre>private&nbsp;boolean didNGramsSearch</pre>
</li>
</ul>
<a name="discountConfidence">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>discountConfidence</h4>
<pre>private&nbsp;double discountConfidence</pre>
</li>
</ul>
<a name="countries">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>countries</h4>
<pre>private&nbsp;java.util.Map&lt;java.lang.String,java.lang.String&gt; countries</pre>
</li>
</ul>
<a name="states">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>states</h4>
<pre>private&nbsp;java.util.Map&lt;java.lang.String,java.lang.String&gt; states</pre>
</li>
</ul>
<a name="googleAPIKey">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>googleAPIKey</h4>
<pre>private static final&nbsp;java.lang.String googleAPIKey</pre>
</li>
</ul>
<a name="type">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>type</h4>
<pre>private&nbsp;java.lang.String type</pre>
</li>
</ul>
<a name="resultDoc">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>resultDoc</h4>
<pre>private&nbsp;org.w3c.dom.Document resultDoc</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="GeoNamesHelper()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GeoNamesHelper</h4>
<pre>public&nbsp;GeoNamesHelper()</pre>
<div class="block">Default Constructor: Initializes all lists and pre-fills country and state lookup maps.</div>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="connect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connect</h4>
<pre>public&nbsp;boolean&nbsp;connect()</pre>
<div class="block">Connects to cheshire via a Socket on localhost, port 12345.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>True if connection was successful, false otherwise.</dd></dl>
</li>
</ul>
<a name="disconnect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disconnect</h4>
<pre>public&nbsp;boolean&nbsp;disconnect()</pre>
<div class="block">Disconnects the Socket connection to cheshire.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>True.</dd></dl>
</li>
</ul>
<a name="getLevelOfSearch()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLevelOfSearch</h4>
<pre>public&nbsp;int&nbsp;getLevelOfSearch()</pre>
</li>
</ul>
<a name="getCheshireResultString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheshireResultString</h4>
<pre>public&nbsp;java.lang.String&nbsp;getCheshireResultString()</pre>
<div class="block">Gets the Geonames XML top result from cheshire.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>XML String for result at position 1.</dd></dl>
</li>
</ul>
<a name="getCheshireResultString(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheshireResultString</h4>
<pre>public&nbsp;java.lang.String&nbsp;getCheshireResultString(int&nbsp;start)</pre>
<div class="block">Gets the Geonames XML result from cheshire at the given offset <code>start</code>. 
 Indexing starts at 1.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>start</code> - Index within the cheshire results.</dd>
<dt><span class="strong">Returns:</span></dt><dd>XML String for result at position <code>start</code></dd></dl>
</li>
</ul>
<a name="getResultCount(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResultCount</h4>
<pre>private&nbsp;int&nbsp;getResultCount(java.lang.String&nbsp;cheshireResult)</pre>
<div class="block">Parses the cheshire result string for the number of matches found.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cheshireResult</code> - Cheshire result string.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Number of results found in cheshire.</dd></dl>
</li>
</ul>
<a name="addResult(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addResult</h4>
<pre>private&nbsp;boolean&nbsp;addResult(java.lang.String&nbsp;cheshireResult)</pre>
<div class="block">Parses the cheshire result string ("Default...") for the number of results
 found, then gets the cheshire Geonames XML string for the top result of this
 query and addes it to each list.  Then, it gets the rest of the XML results from
 cheshire and adds them to the overkill list.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cheshireResult</code> - Cheshire result string.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if at least one result was added, false otherwise.</dd></dl>
</li>
</ul>
<a name="searchForCountry(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchForCountry</h4>
<pre>protected&nbsp;boolean&nbsp;searchForCountry(java.lang.String&nbsp;query)</pre>
<div class="block">Looks up the query string in a map of countries and ISO abbreviations.  If the query matches either
 an abbreviation or a country, cheshire is queried exactly for tht country</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - String to match for a country.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if a country was found, false otherwise.</dd></dl>
</li>
</ul>
<a name="searchForState(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchForState</h4>
<pre>protected&nbsp;boolean&nbsp;searchForState(java.lang.String&nbsp;query)</pre>
<div class="block">Looks up the query string in a map of states and state abbreviations.  If the query matches either
 an abbreviation or state name, cheshire is queried exactly for that state.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - String to match for a state.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if a state was found, false otherwise.</dd></dl>
</li>
</ul>
<a name="queryCheshire(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryCheshire</h4>
<pre>public&nbsp;boolean&nbsp;queryCheshire(java.lang.String&nbsp;query)</pre>
<div class="block">Search for a given query string.  This method is what should be called from another class to
 handle the entire query process.  It performs queries in a few steps:
 <ol>
 <li> Look up the query in a list of US/Canada states for a match (state name or abbreviation)
 <li> Look up the query in a list of countries for a match (country name)
 <li> Perform exact queries on a comma-separated version of the query string
 <li> Perform the undesired queries (n-grams) on the original query string, and post processes the results.
 </ol>
 It then returns true if at least one result was found.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - The query string on which to search.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if there is at least one result, false otherwise.</dd></dl>
</li>
</ul>
<a name="queryGoogle(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryGoogle</h4>
<pre>public&nbsp;boolean&nbsp;queryGoogle(java.lang.String&nbsp;query)</pre>
<div class="block">Search for a given query string as an exact match.  It first normalizes the string by connecting
 to the Google AutoCorrect API to fix spelling errors, etc.  Google will also provide other information
 such as country and place type, which are used.  The resulting normalized string is used for exact
 searching in Cheshire.
 
 It then returns true if at least one result was found.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - The query string on which to search.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if there is at least one result, false otherwise.</dd></dl>
</li>
</ul>
<a name="exactQueries(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>exactQueries</h4>
<pre>public&nbsp;java.lang.String&nbsp;exactQueries(java.lang.String&nbsp;first,
                            java.lang.String&nbsp;second,
                            java.lang.String&nbsp;country,
                            java.lang.String&nbsp;type)</pre>
<div class="block">Performs exact queries in Cheshire based on the query string's parts (first, second, country).  These results are usually good and ordered,
 such that the top result is usually the best.
 <p>
 Searches are performed in the following order:
 <ol>
 <li> Exact match (no truncation) on <code>first</code> as the place name and <code>second</code> as the admin1 code
 <li> Exact match (no truncation) on <code>first</code> as the international place name and <code>second</code> as the admin1 code
 <li> If <code>second</code> contains a US state (in some form): Exact match (no truncation) on <code>first</code> as the place name 
                and the state abbreviation generated from <code>second</code> as the admin1 code
 <li> If <code>second</code> contains a country name (in some form): Exact match (no truncation) on <code>first</code> as the place name 
                and the country ISO abbreviation generated from <code>second</code> as the country code
 <li> If there is a <code>country</code> given: Exact match (no truncation) on <code>first</code> as the place name 
                and the country ISO abbreviation generated from <code>country</code> as the country code
 </ol></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>first</code> - First part of the search string (before the comma), usually a place name</dd><dd><code>second</code> - Second part of the search string (after the comma), usually a state</dd><dd><code>country</code> - Country string, in ISO format</dd><dd><code>type</code> - Feature type string</dd>
<dt><span class="strong">Returns:</span></dt><dd>Top Geonames XML result as a String, if found, or null otherwise.</dd></dl>
</li>
</ul>
<a name="undesiredQueries(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>undesiredQueries</h4>
<pre>public&nbsp;java.lang.String&nbsp;undesiredQueries(java.lang.String&nbsp;first,
                                java.lang.String&nbsp;second,
                                java.lang.String&nbsp;country,
                                java.lang.String&nbsp;query)</pre>
<div class="block">Performs the undesired Cheshire queries.  These are usually guaranteed to be unreliable, as they return many results
 and Cheshire does not do a great job in ordering the results.  The best match for the query will usually NOT be the
 first one returned.  These should only be used as a very last result!
 <p>
 The searches are performed in the following order:
 <ol>
 <li> Ranked keyword results by name (of <code>first</code>) and admin1 codes (of <code>second</code>), with a direct search in country
 <li> N-grams results by name and admin codes (of entire query string), ranked by the number of matching n-grams (NO ORDER ON BEST MATCHING)
 </ol></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>first</code> - First part of the query string, usually the place name</dd><dd><code>second</code> - Second part of the query string, usually the state</dd><dd><code>country</code> - Country string, if one exists</dd><dd><code>query</code> - Full query string to use in last ditch n-grams search</dd>
<dt><span class="strong">Returns:</span></dt><dd>Top Cheshire XML result as String, if one exists, else returns null</dd></dl>
</li>
</ul>
<a name="getAllUniqueResults()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllUniqueResults</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAllUniqueResults()</pre>
<div class="block">Gets all unique top Cheshire results (in Geonmaes XML format), in no particular order.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String of unique concatenated XML results from Cheshire.</dd></dl>
</li>
</ul>
<a name="getAllOrderedResults()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllOrderedResults</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAllOrderedResults()</pre>
<div class="block">Gets all top Cheshire results (in Geonames XML format), in order based on when they were found.  
 Matches for more exact queries will be first, with the top match first.  There may be duplicates
 in this list.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String of concatenated XML results from Cheshire.</dd></dl>
</li>
</ul>
<a name="getAllOrderedResults(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllOrderedResults</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAllOrderedResults(int&nbsp;max)</pre>
<div class="block">Gets top <code>max</code> Cheshire results (in Geonames XML format), in order based on when they were found.  
 Matches for more exact queries will be first, with the top match first. There may be duplicates in this list.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>max</code> - Maximum number of results to return</dd>
<dt><span class="strong">Returns:</span></dt><dd>String of concatenated XML results from Cheshire.</dd></dl>
</li>
</ul>
<a name="getAllResultsCheshireEverReturned()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllResultsCheshireEverReturned</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAllResultsCheshireEverReturned()</pre>
<div class="block">Gets all Cheshire results (in Geonames XML format) that were returned.  This method is OVERKILL.
 There may be duplicates in this list.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String of concatenated XML results from Cheshire.</dd></dl>
</li>
</ul>
<a name="getAllFixedUpResultsCheshireEverReturned()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllFixedUpResultsCheshireEverReturned</h4>
<pre>public&nbsp;java.lang.String&nbsp;getAllFixedUpResultsCheshireEverReturned()</pre>
<div class="block">Gets all Cheshire results (in Geonames XML format) that were returned that are filtered/sorted by ngrams.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String of concatenated XML results from Cheshire.</dd></dl>
</li>
</ul>
<a name="getNumResults()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumResults</h4>
<pre>public&nbsp;int&nbsp;getNumResults()</pre>
<div class="block">Gets the total number of results.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>total number of results.</dd></dl>
</li>
</ul>
<a name="getConfidence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getConfidence</h4>
<pre>public&nbsp;double&nbsp;getConfidence()</pre>
<div class="block">Generates a confidence of the result that has been found.  Right now, it's generated as:
 
   number of times the top result appeared / total number of results
   
 However, we do some discounting of the confidence if an ngrams search was performed.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>confidence of the top result.</dd></dl>
</li>
</ul>
<a name="cleanString(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cleanString</h4>
<pre>public&nbsp;java.lang.String&nbsp;cleanString(java.lang.String&nbsp;string,
                           boolean&nbsp;periodToSpace)</pre>
<div class="block">Cleans a string of extraneous characters, to create a normal form.  Removes parentheses and brackets.  
 Replaces periods (.) with spaces if the periodToSpace parameter is true, else it removes periods.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>string</code> - String to clean.</dd><dd><code>periodToSpace</code> - If true, replaces periods with spaces. If false, removes periods.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Cleaned string.</dd></dl>
</li>
</ul>
<a name="getCountries()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCountries</h4>
<pre>public&nbsp;java.util.HashMap&lt;java.lang.String,java.lang.String&gt;&nbsp;getCountries()</pre>
<div class="block">Creates a hashmap of countries of the world as full name -> ISO standard abbreviation</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Hashmap of all countries</dd></dl>
</li>
</ul>
<a name="getStates()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStates</h4>
<pre>public&nbsp;java.util.HashMap&lt;java.lang.String,java.lang.String&gt;&nbsp;getStates()</pre>
<div class="block">Creates a hashmap of US/Canada states and territories as full name -> abbreviation</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Hashmap of all states and abbreviations</dd></dl>
</li>
</ul>
<a name="checkForUSState(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkForUSState</h4>
<pre>public&nbsp;java.lang.String&nbsp;checkForUSState(java.lang.String&nbsp;first,
                               java.lang.String&nbsp;second)</pre>
<div class="block">Checks for fuzzy state names in the second position in the comma separated string</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>first</code> - First part of the query string (pre comma)</dd><dd><code>second</code> - Second part of the query string (after the comma)</dd>
<dt><span class="strong">Returns:</span></dt><dd>The two-letter state abbreviation, if one exists, or null if not.</dd></dl>
</li>
</ul>
<a name="getGoogleAutoCorrectValue(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGoogleAutoCorrectValue</h4>
<pre>public&nbsp;java.lang.String&nbsp;getGoogleAutoCorrectValue(java.lang.String&nbsp;query)</pre>
<div class="block">Queries the Google Autocorrect API and returns the top comma separated result from Google.  Also stores the type in the type field.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - Search string to query google</dd>
<dt><span class="strong">Returns:</span></dt><dd>Top result from google</dd></dl>
</li>
</ul>
<a name="parseGoogleType(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseGoogleType</h4>
<pre>private&nbsp;java.lang.String&nbsp;parseGoogleType(java.lang.String&nbsp;type2)</pre>
<div class="block">Parses the Google location type and returns a valid Geonames location type</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>type2</code> - Google location type</dd>
<dt><span class="strong">Returns:</span></dt><dd>Geonames location type, or null if there is not a good match</dd></dl>
</li>
</ul>
<a name="getGeonamesEntry()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesEntry</h4>
<pre>public&nbsp;java.lang.String&nbsp;getGeonamesEntry()</pre>
<div class="block">Gets the top Geonames result, in Geonames XML format</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String Geonames XML result, or null if there was a problem</dd></dl>
</li>
</ul>
<a name="getGeonamesId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesId</h4>
<pre>public&nbsp;java.lang.String&nbsp;getGeonamesId()</pre>
<div class="block">Parses out and returns the geonames id from the top Geonames result</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String geonames id or null if there was a problem</dd></dl>
</li>
</ul>
<a name="getGeonamesName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getGeonamesName()</pre>
<div class="block">Parses out and returns the name from the top Geonames result</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String name or null if there was a problem</dd></dl>
</li>
</ul>
<a name="getGeonamesLatitude()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesLatitude</h4>
<pre>public&nbsp;java.lang.String&nbsp;getGeonamesLatitude()</pre>
<div class="block">Parses out and returns the latitude from the top Geonames result</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String latitude or null if there was a problem</dd></dl>
</li>
</ul>
<a name="getGeonamesLongitude()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesLongitude</h4>
<pre>public&nbsp;java.lang.String&nbsp;getGeonamesLongitude()</pre>
<div class="block">Parses out and returns the longitude from the top Geonames result</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>String longitude or null if there was a problem</dd></dl>
</li>
</ul>
<a name="parseResult()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseResult</h4>
<pre>private&nbsp;void&nbsp;parseResult()</pre>
<div class="block">Parses the resulting Geonames XML row into the Document object resultDoc for later use.</div>
</li>
</ul>
<a name="getGeonamesName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesName</h4>
<pre>private&nbsp;java.lang.String&nbsp;getGeonamesName(java.lang.String&nbsp;cheshireResult)</pre>
<div class="block">Parses the given cheshire Geonames XML result and returns the name.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cheshireResult</code> - Geonames XML result string.</dd>
<dt><span class="strong">Returns:</span></dt><dd>String name from the result.</dd></dl>
</li>
</ul>
<a name="getGeonamesPop(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesPop</h4>
<pre>private&nbsp;java.lang.String&nbsp;getGeonamesPop(java.lang.String&nbsp;cheshireResult)</pre>
<div class="block">Parses the given cheshire Geonames XML result and returns the population.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cheshireResult</code> - Geonames XML result string.</dd>
<dt><span class="strong">Returns:</span></dt><dd>String population from the result.</dd></dl>
</li>
</ul>
<a name="getGeonamesNumAltNames(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGeonamesNumAltNames</h4>
<pre>private&nbsp;int&nbsp;getGeonamesNumAltNames(java.lang.String&nbsp;cheshireResult)</pre>
<div class="block">Parses the given cheshire Geonames XML result and returns the number of alternate names.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cheshireResult</code> - Geonames XML result string.</dd>
<dt><span class="strong">Returns:</span></dt><dd>int number of alternate names.</dd></dl>
</li>
</ul>
<a name="getOrderedResultsByNGramsDifference(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrderedResultsByNGramsDifference</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt;&nbsp;getOrderedResultsByNGramsDifference(java.lang.String&nbsp;first,
                                                                        int&nbsp;ngramLength)</pre>
<div class="block">Orders the candidate results from Cheshire to produce a better resulting set.  Given the first part of the
 query string and the length of ngrams used, this method breaks <code>first</code> into ngrams.  It then
 breaks the GeoName <code>name</code> for each of the Cheshire results into ngrams as well.  It then adds
 all results that have at least 1 ngram-overlap with <code>first</code> to a list, then sorts them using
 the DifferenceNGramsComparator, which sorts in the following order:
 <ol>
 <li> Sort by difference between strings (number of ngrams not matched) (ascending)
 <li> Sort by number of overlapping ngrams (descending)
 <li> Sort by alternate names (descending)
 <li> Sort by population (descending)
 </ol>
 
 Once sorted, it calculates a discount on the confidence of the first element being the search result we want.
 This discount is as follows:
 <ol>
 <li> If the first result's name matches <code>first</code>, discount confidence by 50%.
 <li> If the first result's name contains <code>first</code>, discount confidence by 90%.
 <li> Else, discount confidence by 99%.
 </ol>
 
 Also, the number of total results stored is calculated by the top 3 tiers of matches, ie the top three levels
 of ngram overlap or ngram difference from <code>first</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>first</code> - First part of the query string</dd><dd><code>ngramLength</code> - Number of characters per ngram</dd>
<dt><span class="strong">Returns:</span></dt><dd>List of ordered results</dd></dl>
</li>
</ul>
<a name="getSimilarLengthResults(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSimilarLengthResults</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt;&nbsp;getSimilarLengthResults(java.lang.String&nbsp;first,
                                                            int&nbsp;diff)</pre>
<div class="block">Use the list of all results given by Cheshire and the length of the first part of the query string
 to produce a smaller list of results that only differ *in length* from the first part of the query string by
 <code>diff</code> number of characters.  Preserves order of <code>overkill</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>first</code> - First part of the query string</dd><dd><code>diff</code> - Number of characters of allowable difference</dd>
<dt><span class="strong">Returns:</span></dt><dd>List of results that are <code>diff</code> number of characters longer/shorter than <code>first</code></dd></dl>
</li>
</ul>
<a name="getOrderedResultsByNGrams(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOrderedResultsByNGrams</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt;&nbsp;getOrderedResultsByNGrams(java.lang.String&nbsp;first,
                                                              int&nbsp;ngramLength)</pre>
<div class="block">Orders the candidate results from Cheshire to produce a better resulting set.  Given the first part of the
 query string and the length of ngrams used, this method breaks <code>first</code> into ngrams.  It then
 breaks the GeoName <code>name</code> for each of the Cheshire results into ngrams as well.  It then adds
 all results that have at least 1 ngram-overlap with <code>first</code> to a list, then sorts them using
 the overlap (default) comparator, which sorts in the following order:
 <ol>
 <li> Sort by number of overlapping ngrams (descending)
 <li> Sort by difference between strings (number of ngrams not matched) (ascending)
 <li> Sort by alternate names (descending)
 <li> Sort by population (descending)
 </ol></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>first</code> - First part of the query string</dd><dd><code>ngramLength</code> - Number of characters per ngram</dd>
<dt><span class="strong">Returns:</span></dt><dd>List of ordered results</dd></dl>
</li>
</ul>
<a name="getOrderedResultsByNGramsFlexible(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOrderedResultsByNGramsFlexible</h4>
<pre>private&nbsp;java.util.ArrayList&lt;java.lang.String&gt;&nbsp;getOrderedResultsByNGramsFlexible(java.lang.String&nbsp;first,
                                                                      int&nbsp;ngramLength)</pre>
<div class="block">Orders the candidate results from Cheshire to produce a better resulting set.  Given the first part of the
 query string and the length of ngrams used, this method breaks <code>first</code> into ngrams.  It then
 breaks the GeoName <code>name</code> for each of the Cheshire results into ngrams as well.  It then adds
 all results that have at least 1 ngram-overlap with <code>first</code> to a list, then sorts them using
 the FlexibleNGramsComparator, which sorts in the following order:
 <ol>
 <li> Sort by alternate names (descending)
 <li> Sort by string length (descending)
 <li> Sort by population (descending)
 </ol></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>first</code> - First part of the query string</dd><dd><code>ngramLength</code> - Number of characters per ngram</dd>
<dt><span class="strong">Returns:</span></dt><dd>List of ordered results</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/GeoNamesHelper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../edu/virginia/iath/snac/helpers/DateParserHelper.html" title="class in edu.virginia.iath.snac.helpers"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?edu/virginia/iath/snac/helpers/GeoNamesHelper.html" target="_top">Frames</a></li>
<li><a href="GeoNamesHelper.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
